"use strict";function callEvent(e){console.log("banner.event."+e),parent.postMessage("banner.event."+e,"*")}function randomInteger(e,s){var n=e-.5+Math.random()*(s-e+1);return Math.round(n)}var boss={person:"Шеф",welcome:"Убеди босса обновить твой старенький компьютер и&nbsp;выиграй мощный игровой ноут!",chat:[{type:"message--outcome",text:"Здравствуйте, Всеволод Деспотович! А&nbsp;можно мне ноутбук помощнее?"},{type:"message--income",text:"Назови хоть одну причину, почему я&nbsp;должен выполнить твою просьбу?!!!"},{type:"message--outcome",text:"Что&nbsp;ж ты&nbsp;раньше молчал? Нам нужны опытные бойцы! Сегодня&nbsp;же купим тебе игровой ноут!"}],type:["Я буду быстрее печатать","Я бы мог помочь вашей команде в танках!"],final:"Поздравляем, ты&nbsp;прошел босса!"},trener={person:"Тренер",welcome:"Убеди менеджера фитнес-клуба продлить твой абонемент и&nbsp;выиграй сертификат в&nbsp;Спортмастер!",chat:[{type:"message--income",text:"Здравствуйте. Я&nbsp;Анастасия&nbsp;&mdash; менеджер фитнес-клуба. К&nbsp;сожалению вынуждена вам сообщить, что срок вашего абонемента истек."},{type:"message--income",text:"Спасибо за&nbsp;комплимент конечно ☺️ Я&nbsp;попробую что-нибудь придумать. У&nbsp;нас как раз сейчас акция проходит и&nbsp;мне кажется что вы&nbsp;в&nbsp;ней выиграли!"}],type:["Ну&nbsp;пожалуйста&nbsp;&mdash; можно еще хотя&nbsp;бы неделю походить, а&nbsp;то&nbsp;у&nbsp;меня горячую воду дома отключили :(","Анастасия – какое красивое имя! Почему мы с вами не встречались в зале? Может все-таки есть возможность как-то продлить мой абонемент?"],final:"Поздравляем, ты&nbsp;прошел фитнес менеджера!"},prepod={person:"Препод",welcome:"Убеди преподавателя поставить тебе зачет и&nbsp;выиграй каникулы!",chat:[{type:"message--income",text:"Здравствуйте! Почему вас не&nbsp;было на&nbsp;моих последних лекциях?!!! Я&nbsp;не&nbsp;поставлю вам зачет!"},{type:"message--outcome",text:"Простите! Но&nbsp;у&nbsp;меня уважительная причина"},{type:"message--income",text:"Интересно, какая&nbsp;же это? :)"},{type:"message--income",text:"Вы&nbsp;все-таки ознакомились с&nbsp;моей лекцией! Приятно. Ставлю вам зачет автоматом! Можете отправляться в&nbsp;отпуск! Вы&nbsp;выиграли! ;)"}],type:["У меня сломался будильник…","Мной проводился эксперимент по изучению парадокса кота Шредингера – я одновременно был и не был на лекции"],final:"Поздравляем, ты&nbsp;прошел препода!"},frend={person:"Френд",welcome:"Убеди коллегу, помешанного на&nbsp;стильных шмотках, что ты&nbsp;разбираешься в&nbsp;моде и&nbsp;выиграй сертификат на&nbsp;топовую одежду.",chat:[{type:"message--income",text:"Привет! Как тебе последний колаб Кейни и&nbsp;его новые Yeezy?"},{type:"message--income",text:"А&nbsp;ты&nbsp;хайпбист, как я&nbsp;посмотрю! Лови сертификат на&nbsp;топовую одежду&nbsp;&mdash; там как раз есть отличная коллекция для тебя!"}],type:["Кто все эти люди?","Я предпочитаю капсульные коллекции Dior!"],final:"Поздравляем, ты&nbsp;прошел коллегу!"};$(document).ready(function(){parent.postMessage("banner.preventClosing","*");var t,a,i,e=setTimeout(function(){console.log("firstTimer"),$(".face").unbind(),callEvent(5),s(randomInteger(4,7))},5e3);function s(e){switch(e){case 0:n(e,boss),callEvent(1);break;case 1:n(e,trener),callEvent(2);break;case 2:n(e,prepod),callEvent(3);break;case 3:n(e,frend),callEvent(4);break;case 4:n(e-=4,boss);break;case 5:n(e-=4,trener);break;case 6:n(e-=4,prepod);break;case 7:n(e-=4,frend)}}function n(e,s){$(".second .text").html(s.welcome),$(".face span").html(s.person),$(".chat .face img").attr("src","img/face_0"+(e+1)+".png"),$(".chat .face img").attr("srcset","img/face_0"+(e+1)+"@2x.png 2x, img/face_0"+(e+1)+"@3x.png 3x");for(var n=0;n<s.chat.length-1;n++)s.chat[n],$(".messages").append('<div class="message '+s.chat[n].type+'">'+s.chat[n].text+"</div>");$(".final .hero").html(s.final),a=e+1,t=s.chat[s.chat.length-1].text,$(".message").hide(),$(".first").hide(),$(".second").addClass("visible"),setTimeout(function(){$(".second").removeClass("visible"),$(".chat").addClass("visible"),function(e){for(var s=$(".message").length,n=0;n<s;n++)c(n);setTimeout(function(){$(".messages").append('<div class="message message--write"></div>'),new TypeIt(".message--write",{strings:e.type,breakLines:!1,speed:50,beforeStep:function(e,s,n){},afterComplete:function(){console.log("finish"),$(".send, .message-send").addClass("visible"),$(".ti-cursor").hide(),i=setTimeout(function(){console.log("secondTimer"),callEvent(7),p()},5e3)}})},2e3*(s+1))}(s)},3e3)}function c(e){setTimeout(function(){$(".message").eq(e).show()},2e3*(e+1))}function p(){var e=$(".ti-container").html();$(".message-send, .message--write").hide(),$(".send").removeClass("visible"),$(".messages").append('<div class="message message--outcome">'+e+"</div>"),setTimeout(function(){$(".messages").append('<div class="message message--income">'+t+"</div>")},2e3),setTimeout(function(){$(".messages").append('<div class="message message--pic"><img src="img/prize_0'+a+'.png" srcset="img/prize_0'+a+"@2x.png 2x, img/prize_0"+a+'@3x.png 3x"></div>')},4e3),setTimeout(function(){$(".chat").removeClass("visible"),$(".final").addClass("visible")},7e3)}$(".face").click(function(){clearTimeout(e),$(".face").unbind(),s($(this).index())}),$(".message-send").click(function(){clearTimeout(i),callEvent(6),p()}),$(".close").click(function(){callEvent(8),$(".fixed").hide()}),$(".arrow").click(function(){callEvent(9)}),$(".final").click(function(){parent.postMessage("banner.redirect","*")})});